<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hindu Calendar - Data Test 2024-2025</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: linear-gradient(135deg, #ff9933 0%, #ffffff 50%, #138808 100%);
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #ff6600;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        
        .test-section {
            background: #f8f9fa;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #ff6600;
        }
        
        .test-section h2 {
            color: #333;
            margin-top: 0;
            border-bottom: 2px solid #ff6600;
            padding-bottom: 10px;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin: 10px 0;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 10px 0;
        }
        
        .info {
            background: #cce7ff;
            color: #0c5460;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #17a2b8;
            margin: 10px 0;
        }
        
        .data-sample {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(45deg, #ff6600, #ff9933);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            margin: 0 0 10px 0;
            font-size: 1.5rem;
        }
        
        .stat-card p {
            margin: 5px 0;
            font-size: 1.1rem;
        }
        
        .year-selector {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #e9ecef;
            border-radius: 10px;
        }
        
        .year-btn {
            background: #ff6600;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background 0.3s;
        }
        
        .year-btn:hover {
            background: #e55a00;
        }
        
        .year-btn.active {
            background: #138808;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸª” Hindu Calendar - Data Validation Test 2024-2025</h1>
        
        <div class="year-selector">
            <h3>Select Year for Testing:</h3>
            <button class="year-btn active" onclick="switchYear(2024)">2024</button>
            <button class="year-btn" onclick="switchYear(2025)">2025</button>
            <p id="currentYearDisplay">Currently testing: <strong>2024</strong></p>
        </div>

        <div class="test-section">
            <h2>Data Loading Status</h2>
            <div id="loadingStatus"></div>
        </div>

        <div class="test-section">
            <h2 id="yearStatsTitle">2024 Data Statistics</h2>
            <div class="stat-grid" id="yearStats"></div>
        </div>

        <div class="test-section">
            <h2 id="monthsTestTitle">Hindu Months Data 2024</h2>
            <div id="monthsTest"></div>
            <div id="monthsSample" class="data-sample"></div>
        </div>

        <div class="test-section">
            <h2 id="festivalsTestTitle">Festivals Data 2024</h2>
            <div id="festivalsTest"></div>
            <div id="festivalsSample" class="data-sample"></div>
        </div>

        <div class="test-section">
            <h2 id="ekadashiTestTitle">Ekadashi Data 2024</h2>
            <div id="ekadashiTest"></div>
            <div id="ekadashiSample" class="data-sample"></div>
        </div>

        <div class="test-section">
            <h2>Date Mapping Test</h2>
            <div id="dateMappingTest"></div>
            <div id="dateMappingSample" class="data-sample"></div>
        </div>

        <div class="test-section">
            <h2>Calendar Engine Test</h2>
            <div id="engineTest"></div>
            <div id="engineSample" class="data-sample"></div>
        </div>

        <div class="test-section">
            <h2>Overall Test Results</h2>
            <div id="overallResults"></div>
        </div>
    </div>

    <!-- Load Data Files -->
    <script src="data/hindu-months.js"></script>
    <script src="data/festivals-2024.js"></script>
    <script src="data/ekadashi-2024.js"></script>
    
    <!-- Load Engine Files -->
    <script src="js/calendar-engine.js"></script>

    <script>
        let currentTestYear = 2024;
        let testResults = {};

        function switchYear(year) {
            currentTestYear = year;
            document.getElementById('currentYearDisplay').innerHTML = `Currently testing: <strong>${year}</strong>`;
            
            // Update active button
            document.querySelectorAll('.year-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update section titles
            document.getElementById('yearStatsTitle').textContent = `${year} Data Statistics`;
            document.getElementById('monthsTestTitle').textContent = `Hindu Months Data ${year}`;
            document.getElementById('festivalsTestTitle').textContent = `Festivals Data ${year}`;
            document.getElementById('ekadashiTestTitle').textContent = `Ekadashi Data ${year}`;
            
            // Re-run tests
            runTests();
        }

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runTests, 500); // Wait for data to load
        });

        function runTests() {
            testResults = {};
            
            // Test 1: Data Loading Status
            testDataLoading();
            
            // Test 2: Year Statistics
            testYearStatistics();
            
            // Test 3: Hindu Months
            testHinduMonths();
            
            // Test 4: Festivals
            testFestivals();
            
            // Test 5: Ekadashi
            testEkadashi();
            
            // Test 6: Date Mapping
            testDateMapping();
            
            // Test 7: Calendar Engine
            testCalendarEngine();
            
            // Final Results
            showOverallResults();
        }

        function testDataLoading() {
            const results = [];
            
            // Check global variables
            const checks = [
                { name: 'HINDU_MONTHS_2024_2025', data: window.HINDU_MONTHS_2024_2025 },
                { name: 'FESTIVALS_2024', data: window.FESTIVALS_2024 },
                { name: 'FESTIVALS_2025', data: window.FESTIVALS_2025 },
                { name: 'EKADASHI_2024', data: window.EKADASHI_2024 },
                { name: 'EKADASHI_2025', data: window.EKADASHI_2025 },
                { name: 'HinduCalendarEngine', data: window.HinduCalendarEngine }
            ];

            checks.forEach(check => {
                if (check.data) {
                    results.push(`âœ… ${check.name}: Loaded successfully`);
                } else {
                    results.push(`âŒ ${check.name}: NOT LOADED`);
                }
            });

            showResult('loadingStatus', results.join('<br>'), 'info');
            testResults.dataLoading = checks.every(check => check.data);
        }

        function testYearStatistics() {
            try {
                const engine = new HinduCalendarEngine();
                const stats2024 = engine.getYearStatistics(2024);
                const stats2025 = engine.getYearStatistics(2025);
                
                const currentStats = currentTestYear === 2024 ? stats2024 : stats2025;
                
                if (currentStats) {
                    const statsHtml = `
                        <div class="stat-card">
                            <h3>ğŸ“… Year</h3>
                            <p>${currentStats.year}</p>
                        </div>
                        <div class="stat-card">
                            <h3>ğŸ‰ Festivals</h3>
                            <p>${currentStats.totalFestivals}</p>
                        </div>
                        <div class="stat-card">
                            <h3>ğŸŒ™ Ekadashis</h3>
                            <p>${currentStats.totalEkadashis}</p>
                        </div>
                        <div class="stat-card">
                            <h3>â­ Major Festivals</h3>
                            <p>${currentStats.majorFestivals}</p>
                        </div>
                    `;
                    
                    document.getElementById('yearStats').innerHTML = statsHtml;
                    testResults.yearStats = true;
                } else {
                    document.getElementById('yearStats').innerHTML = '<div class="error">Failed to load year statistics</div>';
                    testResults.yearStats = false;
                }
            } catch (error) {
                document.getElementById('yearStats').innerHTML = `<div class="error">Error: ${error.message}</div>`;
                testResults.yearStats = false;
            }
        }

        function testHinduMonths() {
            try {
                const hinduMonths = window.HINDU_MONTHS_2024_2025;
                const yearData = hinduMonths[currentTestYear];
                
                if (yearData) {
                    const monthCount = Object.keys(yearData).length;
                    const sampleMonth = Object.entries(yearData)[0];
                    
                    showResult('monthsTest', 
                        `âœ… Hindu months data loaded successfully for ${currentTestYear}<br>
                         ğŸ“Š Total months: ${monthCount}<br>
                         ğŸ·ï¸ Sample month: ${sampleMonth[1].english} (${sampleMonth[1].roman})`, 
                        'success');
                    
                    // Show sample data
                    document.getElementById('monthsSample').innerHTML = 
                        `<strong>Sample Month Data (${sampleMonth[0]}):</strong><br>` + 
                        JSON.stringify(sampleMonth[1], null, 2);
                    
                    testResults.hinduMonths = true;
                } else {
                    showResult('monthsTest', `âŒ No Hindu months data found for ${currentTestYear}`, 'error');
                    testResults.hinduMonths = false;
                }
            } catch (error) {
                showResult('monthsTest', `âŒ Error testing Hindu months: ${error.message}`, 'error');
                testResults.hinduMonths = false;
            }
        }

        function testFestivals() {
            try {
                const festivalsData = currentTestYear === 2024 ? window.FESTIVALS_2024 : window.FESTIVALS_2025;
                
                if (festivalsData) {
                    const festivalCount = Object.keys(festivalsData).length;
                    const majorFestivals = Object.values(festivalsData).filter(f => f.type === 'major').length;
                    const firstFestival = Object.entries(festivalsData)[0];
                    
                    showResult('festivalsTest', 
                        `âœ… Festivals data loaded successfully for ${currentTestYear}<br>
                         ğŸ“Š Total festivals: ${festivalCount}<br>
                         â­ Major festivals: ${majorFestivals}<br>
                         ğŸ‰ First festival: ${firstFestival[1].english} (${firstFestival[0]})`, 
                        'success');
                    
                    // Show sample data
                    document.getElementById('festivalsSample').innerHTML = 
                        `<strong>Sample Festival Data:</strong><br>` + 
                        JSON.stringify(firstFestival[1], null, 2);
                    
                    testResults.festivals = true;
                } else {
                    showResult('festivalsTest', `âŒ No festivals data found for ${currentTestYear}`, 'error');
                    testResults.festivals = false;
                }
            } catch (error) {
                showResult('festivalsTest', `âŒ Error testing festivals: ${error.message}`, 'error');
                testResults.festivals = false;
            }
        }

        function testEkadashi() {
            try {
                const ekadashiData = currentTestYear === 2024 ? window.EKADASHI_2024 : window.EKADASHI_2025;
                
                if (ekadashiData) {
                    const ekadashiCount = Object.keys(ekadashiData).length;
                    const shuklaEkadashis = Object.values(ekadashiData).filter(e => e.type === 'Shukla').length;
                    const firstEkadashi = Object.entries(ekadashiData)[0];
                    
                    showResult('ekadashiTest', 
                        `âœ… Ekadashi data loaded successfully for ${currentTestYear}<br>
                         ğŸ“Š Total Ekadashis: ${ekadashiCount}<br>
                         ğŸŒ• Shukla Paksha: ${shuklaEkadashis}<br>
                         ğŸŒ™ First Ekadashi: ${firstEkadashi[1].english} (${firstEkadashi[0]})`, 
                        'success');
                    
                    // Show sample data
                    document.getElementById('ekadashiSample').innerHTML = 
                        `<strong>Sample Ekadashi Data:</strong><br>` + 
                        JSON.stringify(firstEkadashi[1], null, 2);
                    
                    testResults.ekadashi = true;
                } else {
                    showResult('ekadashiTest', `âŒ No Ekadashi data found for ${currentTestYear}`, 'error');
                    testResults.ekadashi = false;
                }
            } catch (error) {
                showResult('ekadashiTest', `âŒ Error testing Ekadashi: ${error.message}`, 'error');
                testResults.ekadashi = false;
            }
        }

        function testDateMapping() {
            try {
                const testDates = currentTestYear === 2024 ? 
                    ['2024-01-14', '2024-07-21', '2024-10-20'] : 
                    ['2025-01-14', '2025-07-10', '2025-10-20'];
                
                const results = [];
                let successCount = 0;

                testDates.forEach(dateStr => {
                    const date = new Date(dateStr);
                    
                    // Test Hindu month mapping
                    const hinduMonth = window.getHinduMonthForDate ? window.getHinduMonthForDate(date) : null;
                    
                    // Test festival mapping
                    const festival = window.getFestivalData ? window.getFestivalData(dateStr) : null;
                    
                    // Test Ekadashi mapping
                    const ekadashi = window.getEkadashiData ? window.getEkadashiData(dateStr) : null;
                    
                    results.push({
                        date: dateStr,
                        hinduMonth: hinduMonth ? hinduMonth.roman : 'Not found',
                        festival: festival ? festival.english : 'None',
                        ekadashi: ekadashi ? ekadashi.english : 'None'
                    });
                    
                    if (hinduMonth) successCount++;
                });

                if (successCount > 0) {
                    showResult('dateMappingTest', 
                        `âœ… Date mapping working for ${currentTestYear}<br>
                         ğŸ“Š Successful mappings: ${successCount}/${testDates.length}`, 
                        'success');
                    
                    // Show sample mappings
                    document.getElementById('dateMappingSample').innerHTML = 
                        `<strong>Sample Date Mappings for ${currentTestYear}:</strong><br>` + 
                        JSON.stringify(results, null, 2);
                    
                    testResults.dateMapping = true;
                } else {
                    showResult('dateMappingTest', 'âŒ Date mapping functions not working', 'error');
                    testResults.dateMapping = false;
                }
            } catch (error) {
                showResult('dateMappingTest', `âŒ Error testing date mapping: ${error.message}`, 'error');
                testResults.dateMapping = false;
            }
        }

        function testCalendarEngine() {
            try {
                const engine = new HinduCalendarEngine();
                
                // Navigate to test year
                const testMonth = currentTestYear === 2024 ? 6 : 6; // July
                const calendarData = engine.navigateToMonth(testMonth, currentTestYear);
                
                if (calendarData && calendarData.days && calendarData.days.length > 0) {
                    const daysWithOccasions = calendarData.days.filter(day => day.occasion).length;
                    const auspiciousDays = calendarData.days.filter(day => day.isAuspicious).length;
                    
                    showResult('engineTest', 
                        `âœ… Calendar Engine working for ${currentTestYear}<br>
                         ğŸ“… Generated ${calendarData.days.length} days<br>
                         ğŸ‰ Days with occasions: ${daysWithOccasions}<br>
                         âœ¨ Auspicious days: ${auspiciousDays}<br>
                         ğŸ“Š Hindu months: ${calendarData.hinduMonths.length}`, 
                        'success');
                    
                    // Show sample day data
                    const sampleDay = calendarData.days.find(day => day.occasion) || calendarData.days[14];
                    document.getElementById('engineSample').innerHTML = 
                        `<strong>Sample Day Data (${sampleDay.dateString}):</strong><br>` + 
                        JSON.stringify({
                            day: sampleDay.day,
                            occasion: sampleDay.occasion ? sampleDay.occasion.english : 'None',
                            significance: sampleDay.significance,
                            recommendations: sampleDay.recommendations,
                            isAuspicious: sampleDay.isAuspicious
                        }, null, 2);
                    
                    testResults.calendarEngine = true;
                } else {
                    showResult('engineTest', 'âŒ Calendar Engine failed to generate data', 'error');
                    testResults.calendarEngine = false;
                }
            } catch (error) {
                showResult('engineTest', `âŒ Error testing Calendar Engine: ${error.message}`, 'error');
                testResults.calendarEngine = false;
            }
        }

        function showOverallResults() {
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(result => result).length;
            const failedTests = totalTests - passedTests;
            
            const passPercentage = Math.round((passedTests / totalTests) * 100);
            
            let resultMessage = '';
            let resultType = '';
            
            if (passPercentage === 100) {
                resultMessage = `ğŸ‰ ALL TESTS PASSED! ğŸ‰<br>
                                âœ… ${passedTests}/${totalTests} tests successful<br>
                                ğŸ“Š Success rate: ${passPercentage}%<br><br>
                                ğŸ¯ Hindu Calendar ${currentTestYear} data is ready for production!`;
                resultType = 'success';
            } else if (passPercentage >= 70) {
                resultMessage = `âš ï¸ MOSTLY WORKING âš ï¸<br>
                                âœ… ${passedTests}/${totalTests} tests passed<br>
                                âŒ ${failedTests} tests failed<br>
                                ğŸ“Š Success rate: ${passPercentage}%<br><br>
                                ğŸ”§ Some issues need attention.`;
                resultType = 'info';
            } else {
                resultMessage = `âŒ CRITICAL ISSUES FOUND âŒ<br>
                                âœ… ${passedTests}/${totalTests} tests passed<br>
                                âŒ ${failedTests} tests failed<br>
                                ğŸ“Š Success rate: ${passPercentage}%<br><br>
                                ğŸš¨ Major issues need immediate fixing!`;
                resultType = 'error';
            }
            
            showResult('overallResults', resultMessage, resultType);
        }

        function showResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="${type}">${message}</div>`;
        }
    </script>
</body>
</html> 